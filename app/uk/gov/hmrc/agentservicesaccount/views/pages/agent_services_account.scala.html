@*
 * Copyright 2019 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.agentmtdidentifiers.model.Arn
@import uk.gov.hmrc.agentservicesaccount.config.ExternalUrls
@import play.api.Configuration

@(arn: Arn, isAdmin: Boolean, agencyNameOpt: Option[String], isWhitelisted: Boolean, customDimension: String)(implicit messages: Messages, request: Request[_], externalUrls: ExternalUrls, configuration: Configuration)

@analyticsAdditionalJs = {


        ga('send', 'event', {
            'eventCategory': '@Messages("agent.services.account.additional.links.agent-afi.ga.link-view")',
            'eventAction': '@Messages("agent.services.account.additional.links.agent-afi.ga.manage-clients")',
            'eventLabel': '@Messages("agent.services.account.additional.links.agent-afi.ga.request-auth")'
        });

        ga('send', 'event', {
            'eventCategory': '@Messages("agent.services.account.additional.links.agent-afi.ga.link-view")',
            'eventAction': '@Messages("agent.services.account.additional.links.agent-afi.ga.services-you-need")',
            'eventLabel': '@Messages("agent.services.account.additional.links.agent-afi.ga.view-income-record")'
        });

    ga('send', 'pageview', { '@customDimension': '@if(isWhitelisted) {Whitelisted} else {Non-Whitelisted}' });

}


@agencyName(agencyNameOpt: Option[String]) = {
    @agencyNameOpt.map { name =>
        <span id="agency-name">@name</span>
    }
}

@featureSwitch(featureName: String, toggle: Boolean = true)(content: Html) = {
    @if(toggle && configuration.getBoolean(featureName).getOrElse(false)) { @content }
}


@uk.gov.hmrc.agentservicesaccount.views.html.main_template(title = Messages("agent.services.account.heading"), mainClass = Some("govuk-main-wrapper"), analyticsAdditionalJs = Some(analyticsAdditionalJs)) {
<div class="padding-top40px padding-bottom40px account-services-home">
    <h1 class="govuk-heading-xl welcome-heading">@Messages("app.name")
        <span class="govuk-hint">@Messages("agent.accountNumber", arn.value)</span>
    </h1>

    <div class="govuk-inset-text govuk-!-width-two-thirds">
        <p class="">
            @Messages("agent.services.account.inset")
        </p>
    </div>

    <section class="tile-container" style="margin-bottom: 0">
        <div class="tile">
            <div class="govuk-grid-column-one-half" id="tileS1C1">
                <h2 class="govuk-heading-m" style="margin: 0px 0 10px">@Messages("agent.services.account.section1.h2")</h2>
                <h3 class="govuk-heading-s" style="margin: 0px 0 10px">@Messages("agent.services.account.section1.col1.h3")</h3>
                <p>@Messages("agent.services.account.section1.col1.p")</p>
                <p><a href="https://www.gov.uk/guidance/sign-up-for-making-tax-digital-for-vat" target="_blank">@Messages("agent.services.account.section1.col1.link")</a></p>
            </div>
            <div class="govuk-grid-column-one-half" id="tileS1C2">
                <h3 class="govuk-heading-s" style="margin: 40px 0 10px">@Messages("agent.services.account.section1.col2.h3")</h3>
                <p>@Messages("agent.services.account.section1.col2.p")</p>
                <p><a href="#">@Messages("agent.services.account.section1.col2.link")</a></p>
            </div>
        </div>
    </section>
    <section class="tile-container" style="margin-bottom: 0">
        <div class="tile">
            <div class="govuk-grid-column-one-half" id="tileS2C1">
                <h2 class="govuk-heading-m" style="margin: 0px 0 10px">@Messages("agent.services.account.section2.h2")</h2>
                <p>@Messages("agent.services.account.section2.col1.p")</p>
                <p><a href="@externalUrls.agentAfiUrl">@Messages("agent.services.account.section2.col1.link")</a></p>
            </div>
        </div>
    </section>
    <section class="tile-container" style="margin-bottom: 0">
        <div class="tile">
            <div class="govuk-grid-column-one-half" id="tileS3C1">
                <h2 class="govuk-heading-m" style="margin: 0px 0 5px">@Messages("agent.services.account.section3.h2")</h2>
                <h3 class="govuk-heading-s" style="margin: 0px 0 5px">@Messages("agent.services.account.section3.col1.h3")</h3>
                <p>@Messages("agent.services.account.section3.col1.p")</p>
                <p><a href="@externalUrls.agentInvitationsUrl">@Messages("agent.services.account.section3.col1.link")</a></p>
            </div>
            <div class="govuk-grid-column-one-half" id="tileS3C2">
                <h3 class="govuk-heading-s" style="margin: 35px 0 5px">@Messages("agent.services.account.section3.col2.h3")</h3>
                <p><a href="@externalUrls.agentInvitationsTrackUrl">@Messages("agent.services.account.section3.col2.link1")</a></p>
                <p><a href="@externalUrls.agentMappingUrl">@Messages("agent.services.account.section3.col2.link2")</a></p>
                <p><a href="@externalUrls.agentCancelAuthUrl">@Messages("agent.services.account.section3.col2.link3")</a></p>
            </div>
        </div>
    </section>
</div>








        @if(isAdmin) {

        <h2 class="heading-medium divider--bottom">@agencyName(agencyNameOpt)@Messages("agent.services.sccount.h2.client")</h2>

                <div class="grid-row">
                    <div class="column-one-half">
                        <div class="card">
                            <div class="card-body non-active">
                                <h3 class="heading-small card-heading">
                                    @Messages("agent.services.account.h3.manage")
                                </h3>
                                <p>@Messages("agent.services.account.p.manage")</p>
                            </div>
                            <div class="card-action">
                                <ul>
                                    <li>@Html(Messages("agent.addNewUser.links.start", externalUrls.addUserUrl, "addUserLinkId"))</li>
                                    <li>@Html(Messages("agent.manageYourUsers.links.start", externalUrls.manageUsersUrl, "manageYourUsersLinkId"))</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="column-one-half"></div>
                </div>
    }



}
