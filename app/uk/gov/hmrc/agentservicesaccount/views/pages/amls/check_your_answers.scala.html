@*
 * Copyright 2024 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.agentservicesaccount.config.AppConfig
@import uk.gov.hmrc.agentservicesaccount.controllers
@import uk.gov.hmrc.agentservicesaccount.views.html.main
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukHint
@import uk.gov.hmrc.govukfrontend.views.Aliases.Hint
@import uk.gov.hmrc.govukfrontend.views.Aliases.{ Label, Text}
@import uk.gov.hmrc.agentservicesaccount.views.components.models.SummaryListData
@import uk.gov.hmrc.govukfrontend.views.Aliases.SummaryList
@import uk.gov.hmrc.govukfrontend.views.Aliases.SummaryListRow
@import uk.gov.hmrc.govukfrontend.views.viewmodels.summarylist.Key
@import uk.gov.hmrc.agents.accessgroups.GroupSummary
@import uk.gov.hmrc.govukfrontend.views.Aliases.Text
@import uk.gov.hmrc.govukfrontend.views.viewmodels.content.HtmlContent
@import uk.gov.hmrc.govukfrontend.views.viewmodels.summarylist.Actions
@import uk.gov.hmrc.govukfrontend.views.viewmodels.summarylist.ActionItem
@import uk.gov.hmrc.govukfrontend.views.Aliases.Value
@import uk.gov.hmrc.agentservicesaccount.models.AccountRecoverySummary
@import uk.gov.hmrc.govukfrontend.views.html.components.FormWithCSRF
@import uk.gov.hmrc.govukfrontend.views.Aliases.Button
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukButton
@import uk.gov.hmrc.agentservicesaccount.models.AmlsDetails
@import java.time.LocalDate
@import uk.gov.hmrc.agentservicesaccount.models.UpdateAmlsJourney
@import uk.gov.hmrc.agentservicesaccount.models.AmlsCheckYourAnswers


@this(
        main: main, a: a, p: p, h1: h1,
        link_as_button: link_as_button,
        govukHint: GovukHint,
        summary_list: summary_list,
        govukButton: GovukButton,
        formWithCSRF: FormWithCSRF
)

@(checkAnswers: AmlsCheckYourAnswers)(implicit msgs: Messages, request: Request[_], appConfig: AppConfig)

@main(
  pageTitle = msgs("amls.check-your-answers.h1"),
  mimicBrowserBackLink = true,
  showSecondaryNav = false
) {

  <h1 class="govuk-heading-l">@msgs("amls.check-your-answers.h1")</h1>
  <h2 class="govuk-heading-m">@msgs("amls.check-your-answers.p")</h2>

 @** @formWithCSRF(action = ??? ){ @**controllers.amls.routes.CheckYourAnswersController.onSubmit){**@
    @summary_list(
        Seq(
          SummaryListData(
            key = "agent body",
            value =  checkAnswers.supervisoryBody,
            link = Some(controllers.amls.routes.AmlsNewSupervisoryBodyController.showPage), // /new-body?isChange=true
            linkMsgKey = "common.change"
          ),
          SummaryListData(
            key = "agent number",
            value = checkAnswers.registrationNumber,
            link = Some(controllers.amls.routes.ConfirmRegistrationNumberController.showPage),
            linkMsgKey = "common.change"
          )
        ).++( checkAnswers.renewalDate match{
          case Some(date) => Seq(
          SummaryListData(
              key = "agent expiry",
              value =  checkAnswers.renewalDate.map(convertLocalDateToDisplayDate(_)).getOrElse(msgs("common.not-provided")), //TODO formatting on date d/mmmm/YYYY
              link = Some(controllers.amls.routes.EnterRenewalDateController.showPage),
              linkMsgKey = "common.change"
                  )
              )
              case _ => Seq()
          }
        )
   )

    @link_as_button(
      key = "submit your details",
      href = s"${uk.gov.hmrc.agentservicesaccount.controllers.amls.routes.AmlsConfirmationController.showUpdatedAmlsConfirmationPage}",
      classes = Some("govuk-button")
    )

  }
