@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.agentservicesaccount.config.AppConfig
@import uk.gov.hmrc.agentservicesaccount.views.html.main
@import uk.gov.hmrc.agentservicesaccount.views.html.components._
@import uk.gov.hmrc.govukfrontend.views.html.components.GovukAccordion
@import uk.gov.hmrc.govukfrontend.views.viewmodels.accordion.{Accordion, Section}
@import uk.gov.hmrc.govukfrontend.views.viewmodels.content.{HtmlContent, Text}

@this(
    main: main,
    h1: h1, h2: h2, h3: h3, p: p, ul: ul, a:a, ul_html: ul_html,
    govukAccordion: GovukAccordion)

@(isAdmin: Boolean)(implicit msgs: Messages, request: Request[_], appConfig: AppConfig)


@aboutThisGuidanceItem = {
    @p(key= "help.about-guidance.p1")
    @ul(items = (1 to 5).map(i => s"help.about-guidance.list1.$i"))
    @p(key = "help.about-guidance.p2")
    @ul(items = (1 to 2).map(i => s"help.about-guidance.list2.$i"))
}

@aboutAsaItem = {
    @p(key = "help.about-asa.p1")
    @p(key = "help.about-asa.p2")
    @p(key = "help.about-asa.p3")
}

@clientAuthItem = {
    @p(key = "help.client-auth.p1")
    @p(key = "help.client-auth.p2")
    @p(key = "help.client-auth.p3")
    @p(key = "help.client-auth.p4")
    @a(
    key = "help.client-auth.a",
    href ="https://www.gov.uk/guidance/authorise-an-agent-to-deal-with-certain-tax-services-for-you",
    openInNewWindow=true, classes = Some("govuk-link--no-visited-state")
    )
}

@taxServicesItem = {
    @h3("help.mtd.h2")
    @ul_html(
        classes = Some("govuk-list--spaced"),
        items = Seq[Html](
            a(href = msgs("help.mtd.link1.href"),
                key="help.mtd.link1", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/government/publications/vat-notice-70022-making-tax-digital-for-vat/vat-notice-70022-making-tax-digital-for-vat",
                key="help.mtd.link2", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = msgs("help.mtd.link3.href"),
                key="help.mtd.link3", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/help-and-support-for-making-tax-digital#creating-an-agent-services-account",
                key="help.mtd.link4", openInNewWindow=true, classes = Some("govuk-link--no-visited-state"))
        )
    )

    @h3("help.itsa.h2")
    @ul_html(
        classes = Some("govuk-list--spaced"),
        items = Seq[Html](
            a(href = "https://www.gov.uk/government/collections/making-tax-digital-for-income-tax-as-an-agent-step-by-step",
                key="help.itsa.link1", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/using-making-tax-digital-for-income-tax",
                key="help.itsa.link2", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/sign-up-your-client-for-making-tax-digital-for-income-tax",
                key="help.itsa.link3", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/help-and-support-for-making-tax-digital#creating-an-agent-services-account",
                key="help.mtd.link4", openInNewWindow=true, classes = Some("govuk-link--no-visited-state"))
        )
    )

    @h3("help.trusts.h2")
    @ul_html(
        classes = Some("govuk-list--spaced"),
        items = Seq[Html](
            a(href = "https://www.gov.uk/guidance/register-your-clients-estate",
                key="help.trusts.link1", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = msgs("help.trusts.link2.href"),
                key="help.trusts.link2", openInNewWindow=true, classes = Some("govuk-link--no-visited-state"))
        )
    )

    @h3("help.cgt.h2")
    <div class="govuk-list govuk-list--spaced"> @* adds matching spacing without having a list 1 link long *@
        @a(
        href="https://www.gov.uk/guidance/managing-your-clients-capital-gains-tax-on-uk-property-account",
        key = "help.cgt.link", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")
        )
    </div>

    @h3("help.ppt.h2")
    @ul_html(
        classes = Some("govuk-list--spaced"),
        items = Seq[Html](
            a(href = msgs("help.ppt.link1.href"),
                key="help.ppt.link1", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = msgs("help.ppt.link2.href"),
                key="help.ppt.link2", openInNewWindow=true, classes = Some("govuk-link--no-visited-state"))
        )
    )

    @h3("help.cannot.h2")
    @ul_html(
        classes = Some("govuk-list--spaced"),
        items = Seq[Html](
            a(href = "https://www.gov.uk/guidance/self-assessment-for-agents-online-service",
                key="help.cannot.link1", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/vat-online-services-for-agents",
                key="help.cannot.link2", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/corporation-tax-for-agents-online-service",
                key="help.cannot.link3", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/client-authorisation-an-overview",
                key="help.cannot.link4", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/payecis-for-agents-online-service",
                key="help.cannot.link5", openInNewWindow=true, classes = Some("govuk-link--no-visited-state")),
            a(href = "https://www.gov.uk/guidance/client-authorisation-an-overview#how-to-change-or-cancel-authorisations-as-an-agent",
                key="help.cannot.link6", openInNewWindow=true, classes = Some("govuk-link--no-visited-state"))
        )
    )

}

@standardUserItem = {
    @p(key = "help.manage.standard.p1")
    @ul(items = (1 to 2).map(i => s"help.manage.standard.list1.$i"))
    @p(key = "help.manage.standard.p2")
    @ul(items = (1 to 2).map(i => s"help.manage.standard.list2.$i"))
    @p(key = "help.manage.standard.p3")
}

@adminUserItem = {
    @p(key = "help.manage.admin.p1")
    @ul(items = (1 to 6).map(i => s"help.manage.admin.list1.$i"))
    @h3("help.manage.admin.h3")
    @p(key = "help.manage.admin.p2")
    @p(key = "help.manage.admin.p3")
    @p(key = "help.manage.admin.p4")
    @p(key = "help.manage.admin.p5")
    @p(key = "help.manage.admin.p6")

    @ul(items = (1 to 2).map(i => s"help.manage.admin.list2.$i"))
    @p(key = "help.manage.admin.p7")
    @p(key = "help.manage.admin.p8")
    @p(key = "help.manage.admin.p9")
    @p(key = "help.manage.admin.p10")
    @h3("help.manage.admin.h3.team-members")
    @p(key = "help.manage.admin.p11")
    @h3("help.manage.admin.h3.clients")
    @p(key = "help.manage.admin.p12")
}

@accordionItems = @{
    Seq(
        Section(
            headingContent = Text(msgs("help.subheading1")),
            content = HtmlContent(aboutThisGuidanceItem)
        ),
        Section(
            headingContent = Text(msgs("help.subheading2")),
            content = HtmlContent(aboutAsaItem)
        ),
        Section(
            headingContent = Text(msgs("help.subheading3")),
            content = HtmlContent(clientAuthItem)
        ),
        Section(
            headingContent = Text(msgs("help.subheading4")),
            content = HtmlContent(taxServicesItem)
        ),
        Section(
            headingContent = Text(msgs("help.subheading5")),
            content = HtmlContent(standardUserItem)
        ),
        Section(
            headingContent = Text(msgs("help.subheading6")),
            content = HtmlContent(adminUserItem)
        )
    )
}

@main(pageTitle = msgs("help.heading"), isAdmin = isAdmin) {

@h1("help.heading")
@p("help.p1", classes=Some("govuk-body-l"), addStandardClasses=false)

@govukAccordion(
    Accordion(
        id = "accordion-help",
        headingLevel = 2,
        items = accordionItems,
        attributes = Map(
            "data-i18n.show-section" -> msgs("accordion.showSection"),
            "data-i18n.hide-section" -> msgs("accordion.hideSection"),
            "data-i18n.show-all-sections" -> msgs("accordion.showAllSections"),
            "data-i18n.hide-all-sections" -> msgs("accordion.hideAllSections")
        )
    )
)

}
